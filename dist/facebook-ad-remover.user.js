// ==UserScript==
// @name        Facebook advertisements remover
// @version     1.5.5
// @author      Hung Dinh
// @description Remove advertisements on facebook web
// @homepage    https://github.com/dinhhung2910/our-userscripts#readme
// @supportURL  https://github.com/dinhhung2910/our-userscripts/pulls
// @match       https://www.facebook.com/**
// @namespace   Script
// @updateURL   https://github.com/dinhhung2910/our-userscripts/raw/main/dist/facebook-ad-remover.user.js
// @source      https://github.com/dinhhung2910/our-userscripts/blob/main/dist/facebook-ad-remover.user.js
// @grant       GM_getValue
// @grant       GM_setValue
// @grant       GM_deleteValue
// @grant       GM_listValues
// @grant       GM_notification
// @grant       GM_xmlhttpRequest
// @grant       GM_addValueChangeListener
// @grant       GM_removeValueChangeListener
// @grant       GM_log
// ==/UserScript==

(()=>{"use strict";var e={990:(e,t,n)=>{function r(e){const t=document.getElementsByTagName("head")[0],n=document.createElement("link");t&&(n.type="text/css",n.rel="stylesheet",n.href=e,t.appendChild(n))}n.r(t),n.d(t,{addExternalStyle:()=>r,checkContainSelectors:()=>E,getSnapshotElmByContent:()=>l,hideDOM:()=>c,observeDOM:()=>o,removeDOM:()=>s});const o=(e,t,n)=>{const r={attributes:!1,childList:!1,subtree:!1,...t},o=new MutationObserver(n);return o.observe(e,r),()=>o.disconnect()},l=e=>{const t=["b","span"];let n=null;for(let r=0;r<t.length;r++){const o=t[r];if(n&&n.snapshotLength)break;n=document.evaluate(`//${o}[contains(., '${e}')]`,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null)}return n&&n.snapshotLength?n.snapshotItem(0):null},E=(e,t)=>{if(!e)return!1;let n=!1;return t.forEach((t=>{((e,t)=>!!e.querySelector(t))(e,t)&&(n=!0)})),n},s=e=>{try{e.parentElement.removeChild(e)}catch(e){console.error(e)}},c=e=>{try{e.style.display="none",e.classList.add("hided")}catch(e){console.error(e)}}},758:(e,t,n)=>{n.r(t),n.d(t,{AD_LABELS:()=>r,AD_SELECTORS:()=>o,ARTICLES_SELECTOR:()=>i,DEFAULT_AD_SELECTOR:()=>T,FEED_HEADING_CONTENT:()=>c,FEED_HEADING_SELECTOR:()=>s,INGORED_ARTICLE_CATEGORIES:()=>a,INTERVAL_TIME_REMOVE_EXISTED_ADS:()=>u,INTERVAL_TIME_RE_EVALUATE_ADS:()=>d,RIGHT_PANEL_ADS_HEADING_CONTENT:()=>E,RIGHT_PANEL_SELECTOR:()=>l,STORE_KEY:()=>_});const r=["Được tài trợ","Gợi ý cho bạn","Sponsored","Suggested for You","Reels và video ngắn"],o=['[href^="/ads/about"]','[href^="/reel/"]'],l="div[role=complementary]",E="Được tài trợ",s="h3",c="Bài viết trên Bảng tin",i=":scope>div:not(.checked)",a=["SPONSORED","ENGAGEMENT","SHOWCASE","FB_SHORTS"],d=3e4,u=2e3,_="adSelector",T=["[aria-label=Sponsored]","a[role=link][target=_blank]"]}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,n),l.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=GM_setValue,t=GM_getValue,r=GM_deleteValue,o=GM_listValues,l=(e,t)=>{GM_addValueChangeListener(e,((e,n,r,o)=>t(r,o,n)))},E=(n,r,o)=>{e(n,o(t(n,r)))},s={get:t,set:e,del:r,list:o,onChange:l,update:E,val:n=>({set:e.bind(null,n),get:t.bind(null,n),del:r.bind(null,n),update:E.bind(null,n),onChange:l.bind(null,n)})};var c=n(758),i=n(990);const a={attributes:!1,childList:!0,subtree:!1},d=function(e,t){for(const t of e)"childList"===t.type&&t.addedNodes.forEach((e=>{u(e)&&(console.log("removed incoming ad"),(0,i.hideDOM)(e))}))},u=e=>{if(!e)return!1;let t=!1;const n=(e=>{const t=Object.keys(e).find((e=>e.includes("reactProp")));if(!t)return null;let n=null;try{n=e[t].children.props.children.props.children.props.children.props}catch(e){}return n})(e);if(!n)return!1;e.classList.add("checked");try{t=c.INGORED_ARTICLE_CATEGORIES.includes(n.feedEdge.category)}catch(e){console.warn(e)}return t},_=e=>{e?e.querySelectorAll(c.ARTICLES_SELECTOR).forEach((e=>{u(e)&&(console.log("removed remain ad"),(0,i.hideDOM)(e))})):setTimeout((()=>{const e=document.querySelectorAll(c.FEED_HEADING_SELECTOR);let t=null;for(let n of e)n.innerText==c.FEED_HEADING_CONTENT&&(t=n.nextElementSibling);_(t)}))},T=e=>{e?(0,i.observeDOM)(e,a,d):setTimeout((()=>{const e=document.querySelectorAll(c.FEED_HEADING_SELECTOR);let t=null;for(let n of e)n.innerText==c.FEED_HEADING_CONTENT&&(t=n.nextElementSibling);T(t)}),500)},{removeDOM:S}=n(990),{RIGHT_PANEL_SELECTOR:h,RIGHT_PANEL_ADS_HEADING_CONTENT:A}=n(758),O=()=>{(()=>{const e=document.querySelector(h);if(e){const t=e.querySelectorAll("h3");let n=null;for(const e of t)e.innerText==A&&(n=e);let r=n;if(n)for(;r&&"SPAN"!=r.tagName;)r=r.parentElement;r&&(console.log("Remove right panel ADs"),S(r))}})(),_()};s.set(c.STORE_KEY,c.DEFAULT_AD_SELECTOR),setInterval(O,c.INTERVAL_TIME_REMOVE_EXISTED_ADS),T()})()})();